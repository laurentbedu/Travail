-- MySQL Script generated by MySQL Workbench
-- dim. 19 janv. 2020 13:54:04 CET
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema lacrImmoBD
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `lacrImmoBD` ;

-- -----------------------------------------------------
-- Schema lacrImmoBD
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `lacrImmoBD` DEFAULT CHARACTER SET utf8 ;
USE `lacrImmoBD` ;

-- -----------------------------------------------------
-- Table `lacrImmoBD`.`PropertiesTypes`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`PropertiesTypes` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`PropertiesTypes` (
  `idPropertiesTypes` INT NOT NULL AUTO_INCREMENT,
  `propertieType` VARCHAR(20) NULL,
  PRIMARY KEY (`idPropertiesTypes`),
  UNIQUE INDEX `idPropertiesTypes_UNIQUE` (`idPropertiesTypes` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`Regions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`Regions` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`Regions` (
  `idRegions` INT NOT NULL AUTO_INCREMENT,
  `region` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idRegions`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`ZipCodesAndCities`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`ZipCodesAndCities` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`ZipCodesAndCities` (
  `idZipCodesAndCities` INT NOT NULL AUTO_INCREMENT,
  `zipCode` VARCHAR(45) NULL,
  `city` VARCHAR(45) NULL,
  `Regions_idRegions` INT NOT NULL,
  PRIMARY KEY (`idZipCodesAndCities`, `Regions_idRegions`),
  UNIQUE INDEX `idZipCodesAndCities_UNIQUE` (`idZipCodesAndCities` ASC),
  INDEX `fk_ZipCodesAndCities_Regions1_idx` (`Regions_idRegions` ASC),
  CONSTRAINT `fk_ZipCodesAndCities_Regions1`
    FOREIGN KEY (`Regions_idRegions`)
    REFERENCES `lacrImmoBD`.`Regions` (`idRegions`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`TypesOfAdress`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`TypesOfAdress` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`TypesOfAdress` (
  `idTypesOfAdress` INT NOT NULL AUTO_INCREMENT,
  `TypeOfAdress` VARCHAR(45) NULL,
  PRIMARY KEY (`idTypesOfAdress`),
  UNIQUE INDEX `idTypesOfAdress_UNIQUE` (`idTypesOfAdress` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`Address`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`Address` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`Address` (
  `idAddress` INT NOT NULL AUTO_INCREMENT,
  `TypesOfAdress_idTypesOfAdress` INT NOT NULL,
  `streetNumber` VARCHAR(40) NULL,
  `complStreetNumber` VARCHAR(5) NULL,
  `streetName` VARCHAR(45) NULL,
  `complStreetname` VARCHAR(45) NULL,
  `ZipCodesAndCities_idZipCodesAndCities` INT NOT NULL,
  PRIMARY KEY (`idAddress`, `TypesOfAdress_idTypesOfAdress`, `ZipCodesAndCities_idZipCodesAndCities`),
  UNIQUE INDEX `idAddress_UNIQUE` (`idAddress` ASC),
  INDEX `fk_Address_ZipCodesAndCities1_idx` (`ZipCodesAndCities_idZipCodesAndCities` ASC),
  INDEX `fk_Address_TypesOfAdress1_idx` (`TypesOfAdress_idTypesOfAdress` ASC),
  CONSTRAINT `fk_Address_ZipCodesAndCities1`
    FOREIGN KEY (`ZipCodesAndCities_idZipCodesAndCities`)
    REFERENCES `lacrImmoBD`.`ZipCodesAndCities` (`idZipCodesAndCities`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Address_TypesOfAdress1`
    FOREIGN KEY (`TypesOfAdress_idTypesOfAdress`)
    REFERENCES `lacrImmoBD`.`TypesOfAdress` (`idTypesOfAdress`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`Properties`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`Properties` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`Properties` (
  `idProperties` INT NOT NULL AUTO_INCREMENT,
  `PropertiesTypes_idPropertiesTypes` INT NOT NULL,
  `description` MEDIUMTEXT NULL,
  `totalBedRoom` TINYINT(3) NULL,
  `additionnalCharges` VARCHAR(3) NULL,
  `garden` VARCHAR(3) NULL,
  `garage` VARCHAR(3) NULL,
  `price` DECIMAL(10,2) NULL,
  `photoName` VARCHAR(45) NULL,
  `Address_idAddress` INT NOT NULL,
  `active` TINYINT(1) NULL,
  PRIMARY KEY (`idProperties`, `PropertiesTypes_idPropertiesTypes`, `Address_idAddress`),
  UNIQUE INDEX `idOffers_UNIQUE` (`idProperties` ASC),
  INDEX `fk_Announces_PropertiesTypes1_idx` (`PropertiesTypes_idPropertiesTypes` ASC),
  INDEX `fk_Announces_Address1_idx` (`Address_idAddress` ASC),
  CONSTRAINT `fk_Announces_PropertiesTypes1`
    FOREIGN KEY (`PropertiesTypes_idPropertiesTypes`)
    REFERENCES `lacrImmoBD`.`PropertiesTypes` (`idPropertiesTypes`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Announces_Address1`
    FOREIGN KEY (`Address_idAddress`)
    REFERENCES `lacrImmoBD`.`Address` (`idAddress`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`Contacts`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`Contacts` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`Contacts` (
  `idContacts` INT NOT NULL AUTO_INCREMENT,
  `object` VARCHAR(45) NULL,
  `message` MEDIUMTEXT NULL,
  PRIMARY KEY (`idContacts`),
  UNIQUE INDEX `idContacts_UNIQUE` (`idContacts` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`Prospects`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`Prospects` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`Prospects` (
  `idProspect` INT NOT NULL AUTO_INCREMENT,
  `contactDate` DATE NULL,
  `lastname` VARCHAR(45) NULL,
  `firstname` VARCHAR(45) NULL,
  `email` VARCHAR(45) NULL,
  `phoneNumber` VARCHAR(45) NULL,
  `Contacts_idContacts` INT NOT NULL,
  PRIMARY KEY (`idProspect`, `Contacts_idContacts`),
  UNIQUE INDEX `idUsers_UNIQUE` (`idProspect` ASC),
  INDEX `fk_Users_Contacts_idx` (`Contacts_idContacts` ASC),
  CONSTRAINT `fk_Users_Contacts`
    FOREIGN KEY (`Contacts_idContacts`)
    REFERENCES `lacrImmoBD`.`Contacts` (`idContacts`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`TransactionTypes`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`TransactionTypes` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`TransactionTypes` (
  `idTransactionTypes` INT NOT NULL AUTO_INCREMENT,
  `transactionType` VARCHAR(20) NULL,
  PRIMARY KEY (`idTransactionTypes`),
  UNIQUE INDEX `idTransactionTypes_UNIQUE` (`idTransactionTypes` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`Agencies`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`Agencies` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`Agencies` (
  `idListOfAgencies` INT NOT NULL AUTO_INCREMENT,
  `agencyName` VARCHAR(45) NOT NULL,
  `Address_idAddress` INT NOT NULL,
  PRIMARY KEY (`idListOfAgencies`, `Address_idAddress`),
  UNIQUE INDEX `idListOfAgencies_UNIQUE` (`idListOfAgencies` ASC),
  INDEX `fk_ListOfAgencies_Address1_idx` (`Address_idAddress` ASC),
  CONSTRAINT `fk_ListOfAgencies_Address1`
    FOREIGN KEY (`Address_idAddress`)
    REFERENCES `lacrImmoBD`.`Address` (`idAddress`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `lacrImmoBD`.`Announces`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `lacrImmoBD`.`Announces` ;

CREATE TABLE IF NOT EXISTS `lacrImmoBD`.`Announces` (
  `idAnnounce` INT NOT NULL AUTO_INCREMENT,
  `TransactionTypes_idTransactionTypes` INT NOT NULL,
  `Properties_idProperties` INT NOT NULL,
  PRIMARY KEY (`idAnnounce`, `TransactionTypes_idTransactionTypes`, `Properties_idProperties`),
  UNIQUE INDEX `idListOfProperties_UNIQUE` (`idAnnounce` ASC),
  INDEX `fk_Announces_TransactionTypes1_idx` (`TransactionTypes_idTransactionTypes` ASC),
  INDEX `fk_Announces_Properties1_idx` (`Properties_idProperties` ASC),
  CONSTRAINT `fk_Announces_TransactionTypes1`
    FOREIGN KEY (`TransactionTypes_idTransactionTypes`)
    REFERENCES `lacrImmoBD`.`TransactionTypes` (`idTransactionTypes`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Announces_Properties1`
    FOREIGN KEY (`Properties_idProperties`)
    REFERENCES `lacrImmoBD`.`Properties` (`idProperties`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`PropertiesTypes`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`PropertiesTypes` (`idPropertiesTypes`, `propertieType`) VALUES (1, 'Maison');
INSERT INTO `lacrImmoBD`.`PropertiesTypes` (`idPropertiesTypes`, `propertieType`) VALUES (2, 'Appartement');

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`Regions`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`Regions` (`idRegions`, `region`) VALUES (1, 'Hauts-de-France');

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`ZipCodesAndCities`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`ZipCodesAndCities` (`idZipCodesAndCities`, `zipCode`, `city`, `Regions_idRegions`) VALUES (1, '62800', 'Liévin', 1);
INSERT INTO `lacrImmoBD`.`ZipCodesAndCities` (`idZipCodesAndCities`, `zipCode`, `city`, `Regions_idRegions`) VALUES (2, '59170', 'Roubaix', 1);
INSERT INTO `lacrImmoBD`.`ZipCodesAndCities` (`idZipCodesAndCities`, `zipCode`, `city`, `Regions_idRegions`) VALUES (3, '59200', 'Tourcoing', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`TypesOfAdress`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`TypesOfAdress` (`idTypesOfAdress`, `TypeOfAdress`) VALUES (1, 'Annonce');
INSERT INTO `lacrImmoBD`.`TypesOfAdress` (`idTypesOfAdress`, `TypeOfAdress`) VALUES (2, 'Agence');

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`Address`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`Address` (`idAddress`, `TypesOfAdress_idTypesOfAdress`, `streetNumber`, `complStreetNumber`, `streetName`, `complStreetname`, `ZipCodesAndCities_idZipCodesAndCities`) VALUES (1, 1, '41', NULL, 'Rue Henri Martin', NULL, 1);
INSERT INTO `lacrImmoBD`.`Address` (`idAddress`, `TypesOfAdress_idTypesOfAdress`, `streetNumber`, `complStreetNumber`, `streetName`, `complStreetname`, `ZipCodesAndCities_idZipCodesAndCities`) VALUES (2, 2, NULL, NULL, 'Rue du Mal Delattre De Tassigny', NULL, 1);
INSERT INTO `lacrImmoBD`.`Address` (`idAddress`, `TypesOfAdress_idTypesOfAdress`, `streetNumber`, `complStreetNumber`, `streetName`, `complStreetname`, `ZipCodesAndCities_idZipCodesAndCities`) VALUES (3, 2, '14', NULL, 'Rue du Château', NULL, 2);
INSERT INTO `lacrImmoBD`.`Address` (`idAddress`, `TypesOfAdress_idTypesOfAdress`, `streetNumber`, `complStreetNumber`, `streetName`, `complStreetname`, `ZipCodesAndCities_idZipCodesAndCities`) VALUES (4, 1, '', '', 'Cour Planchon', NULL, 2);
INSERT INTO `lacrImmoBD`.`Address` (`idAddress`, `TypesOfAdress_idTypesOfAdress`, `streetNumber`, `complStreetNumber`, `streetName`, `complStreetname`, `ZipCodesAndCities_idZipCodesAndCities`) VALUES (5, 2, '51-33', '', 'Rue de la Cloche', '', 3);
INSERT INTO `lacrImmoBD`.`Address` (`idAddress`, `TypesOfAdress_idTypesOfAdress`, `streetNumber`, `complStreetNumber`, `streetName`, `complStreetname`, `ZipCodesAndCities_idZipCodesAndCities`) VALUES (6, 1, '31', NULL, 'Rue de Roncq', NULL, 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`Properties`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`Properties` (`idProperties`, `PropertiesTypes_idPropertiesTypes`, `description`, `totalBedRoom`, `additionnalCharges`, `garden`, `garage`, `price`, `photoName`, `Address_idAddress`, `active`) VALUES (1, 1, 'Grande maison pavillonaire à proximité du centre et des écoles. Salon séjour de 18.5m², cuisine de 10.41m², salle de bains avec vasque et baignoire de 5.6... ', 5, 'Oui', 'Oui', 'Oui', 250000, NULL, 1, 1);
INSERT INTO `lacrImmoBD`.`Properties` (`idProperties`, `PropertiesTypes_idPropertiesTypes`, `description`, `totalBedRoom`, `additionnalCharges`, `garden`, `garage`, `price`, `photoName`, `Address_idAddress`, `active`) VALUES (2, 1, 'En secteur calme très proche des écoles, jolie maison individuelle en L des années 1930 en bon état. Salon séjour de 24m² avec poêle à granul...', 4, 'Oui', 'Oui', 'Oui', 185000, NULL, 4, 1);
INSERT INTO `lacrImmoBD`.`Properties` (`idProperties`, `PropertiesTypes_idPropertiesTypes`, `description`, `totalBedRoom`, `additionnalCharges`, `garden`, `garage`, `price`, `photoName`, `Address_idAddress`, `active`) VALUES (3, 2, 'Appartement spacieux et lumineux, sans vis à vis entrée, cuisine, 2 sdb, 2 wc, palier, 3 chambres, un grand séjour.', 3, 'Oui', 'Non', 'Non', 3500, NULL, 6, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`Contacts`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`Contacts` (`idContacts`, `object`, `message`) VALUES (1, 'Votre annonce n° 1', 'Je suis très intéressé par votre maison');
INSERT INTO `lacrImmoBD`.`Contacts` (`idContacts`, `object`, `message`) VALUES (2, 'Votre offre 1', 'Bonjour, pourrais-je avoir plus de détails sur cette superbe maison');
INSERT INTO `lacrImmoBD`.`Contacts` (`idContacts`, `object`, `message`) VALUES (3, 'Annonce n°3', 'Bonjour est-ce que l\'appartement dans l\'annonce numéro 3 est toujours disponibles ?');

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`Prospects`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`Prospects` (`idProspect`, `contactDate`, `lastname`, `firstname`, `email`, `phoneNumber`, `Contacts_idContacts`) VALUES (1, '2020-01-17', 'Ingalls', 'Charles', 'lapetitemaison@gmail.com', '0300000000', 1);
INSERT INTO `lacrImmoBD`.`Prospects` (`idProspect`, `contactDate`, `lastname`, `firstname`, `email`, `phoneNumber`, `Contacts_idContacts`) VALUES (2, '2020-01-19', 'Doe', 'John', 'johnTheWinner@yahoo.com', '0600000000', 2);
INSERT INTO `lacrImmoBD`.`Prospects` (`idProspect`, `contactDate`, `lastname`, `firstname`, `email`, `phoneNumber`, `Contacts_idContacts`) VALUES (3, '2020-01-19', 'Hugo', 'Victor', 'iWannaWriteABook@wanadoo.fr', '0700000000', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`TransactionTypes`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`TransactionTypes` (`idTransactionTypes`, `transactionType`) VALUES (1, 'Achat');
INSERT INTO `lacrImmoBD`.`TransactionTypes` (`idTransactionTypes`, `transactionType`) VALUES (2, 'Location');

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`Agencies`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`Agencies` (`idListOfAgencies`, `agencyName`, `Address_idAddress`) VALUES (1, 'Liévin', 2);
INSERT INTO `lacrImmoBD`.`Agencies` (`idListOfAgencies`, `agencyName`, `Address_idAddress`) VALUES (2, 'Roubaix', 3);
INSERT INTO `lacrImmoBD`.`Agencies` (`idListOfAgencies`, `agencyName`, `Address_idAddress`) VALUES (3, 'Tourcoing', 5);

COMMIT;


-- -----------------------------------------------------
-- Data for table `lacrImmoBD`.`Announces`
-- -----------------------------------------------------
START TRANSACTION;
USE `lacrImmoBD`;
INSERT INTO `lacrImmoBD`.`Announces` (`idAnnounce`, `TransactionTypes_idTransactionTypes`, `Properties_idProperties`) VALUES (1, 1, 1);
INSERT INTO `lacrImmoBD`.`Announces` (`idAnnounce`, `TransactionTypes_idTransactionTypes`, `Properties_idProperties`) VALUES (2, 1, 2);
INSERT INTO `lacrImmoBD`.`Announces` (`idAnnounce`, `TransactionTypes_idTransactionTypes`, `Properties_idProperties`) VALUES (3, 2, 3);

COMMIT;

